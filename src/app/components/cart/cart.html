<div class="container-layout">
  <button class="btn-back" (click)="goBack()">{{ 'CART.BACK' | translate }}</button>

  <h2>{{ 'CART.TITLE' | translate }}</h2>

  <div *ngIf="items.length === 0" class="empty-cart">
    {{ 'CART.EMPTY' | translate }}
  </div>

  <div class="cart-container" *ngIf="items.length !== 0">
    <ul class="cart-list">
      <li *ngFor="let item of items; let i = index" class="cart-item">
        <div class="item-info">
          <img [src]="item.imageUrl" [alt]="item.name" class="product-image" />
          <div>
            <h3>{{ item.name }}</h3>
            <p>
              {{ 'CART.QUANTITY' | translate }}:
              <input type="number" [value]="item.quantity" min="1" [max]="item.stock"
                (change)="updateQuantity(item.id, $event.target.valueAsNumber)" />
            </p>
            <p>
              {{ 'CART.UNIT_PRICE' | translate }}:
              <span *ngIf="item.offer && item.offerPrice" class="original-price">
                {{ item.price | currency:'BRL' }}
              </span>
              <span class="offer-price" *ngIf="item.offer && item.offerPrice">
                {{ item.offerPrice | currency:'BRL' }}
              </span>
              <span *ngIf="!item.offer">
                {{ item.price | currency:'BRL' }}
              </span>
            </p>
            <p>
              {{ 'CART.TOTAL_PRICE' | translate }}:
              <strong>
                {{
                  (item.offer && item.offerPrice ? item.offerPrice : item.price) * item.quantity
                  | currency:'BRL'
                }}
              </strong>
            </p>
          </div>
        </div>

        <div class="item-actions">
          <button class="btn-remove" (click)="removeOneItem(i)">âœ•</button>
        </div>
      </li>
    </ul>

    <div class="cart-footer">
      <div class="prices">
        <p *ngIf="totalEconomia > 0" class="economia">
          {{ 'CART.DISCOUNT' | translate }}:
          <strong>{{ totalEconomia | currency:'BRL' }}</strong>
        </p>
        <p>
          {{ 'CART.TOTAL' | translate }}:
          <strong>{{ total | currency:'BRL' }}</strong>
        </p>
      </div>

      <div class="buttons">
        <button class="btn-confirm" (click)="addItems()">
          {{ 'CART.CONTINUE' | translate }}
        </button>
        <button class="btn-buy" (click)="checkout()">
          {{ 'CART.BUY' | translate }}
        </button>
      </div>
    </div>
  </div>
</div>